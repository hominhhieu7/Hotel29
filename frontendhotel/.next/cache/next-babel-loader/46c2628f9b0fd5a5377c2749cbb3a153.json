{"ast":null,"code":"import \"antd/lib/row/style/css\";\nimport _Row from \"antd/lib/row\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport \"antd/lib/button/style/css\";\nimport _Button from \"antd/lib/button\";\nimport \"antd/lib/form/style/css\";\nimport _Form from \"antd/lib/form\";\nimport \"antd/lib/input/style/css\";\nimport _Input from \"antd/lib/input\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport \"antd/lib/message/style/css\";\nimport _message from \"antd/lib/message\";\nvar __jsx = React.createElement;\nimport React, { useContext, useState } from 'react';\nimport Link from 'next/link';\nimport apiServices from '../../services/apiServices';\nimport { API } from '../../services/apiResource';\nimport Router from 'next/router';\nimport { UserContext } from '../../Context/StoreContext';\nvar layout = {\n  labelCol: {\n    span: 8\n  },\n  wrapperCol: {\n    span: 16\n  }\n};\nvar tailLayout = {\n  wrapperCol: {\n    offset: 8,\n    span: 16\n  }\n};\nexport default function Login() {\n  var _useContext = useContext(UserContext),\n      setUser = _useContext.setUser;\n\n  var _useState = useState(false),\n      loading = _useState[0],\n      setLoading = _useState[1];\n\n  var submitFinish = function submitFinish(values) {\n    var data, dataUser;\n    return _regeneratorRuntime.async(function submitFinish$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            setLoading(true);\n            _context.next = 3;\n            return _regeneratorRuntime.awrap(apiServices.get(API.USERS.get));\n\n          case 3:\n            data = _context.sent;\n\n            if (!data) {\n              _context.next = 9;\n              break;\n            }\n\n            dataUser = data.find(function (user) {\n              return user.email === values.email && user.password === values.password;\n            });\n\n            if (dataUser) {\n              setUser({\n                id: dataUser.id,\n                name: dataUser.name\n              });\n\n              _message.success(\"Login success\", 1);\n\n              Router.push('/');\n            } else {\n              setLoading(false);\n\n              _message.error(\"Not found user\", 1);\n            }\n\n            _context.next = 11;\n            break;\n\n          case 9:\n            setLoading(false);\n            throw Error(\"failed to fetch!!!\");\n\n          case 11:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  return __jsx(_Row, {\n    style: {\n      paddingTop: \"13%\"\n    },\n    justify: \"center\"\n  }, __jsx(_Form, _extends({}, layout, {\n    onFinish: submitFinish\n  }), __jsx(_Form.Item, {\n    label: \"email\",\n    name: \"email\",\n    rules: [{\n      required: true,\n      message: 'Please input your username!'\n    }]\n  }, __jsx(_Input, null)), __jsx(_Form.Item, {\n    label: \"Password\",\n    name: \"password\",\n    rules: [{\n      required: true,\n      message: 'Please input your password!'\n    }]\n  }, __jsx(_Input.Password, null)), __jsx(_Form.Item, tailLayout, __jsx(_Button, {\n    loading: loading,\n    type: \"primary\",\n    htmlType: \"submit\"\n  }, \"Login\"), __jsx(Link, {\n    href: \"/\"\n  }, __jsx(\"a\", {\n    style: {\n      paddingLeft: \"20px\"\n    }\n  }, \"Back to home\")))));\n}","map":null,"metadata":{},"sourceType":"module"}