{"ast":null,"code":"import \"antd/lib/row/style/css\";\nimport _Row from \"antd/lib/row\";\nimport \"antd/lib/button/style/css\";\nimport _Button from \"antd/lib/button\";\nimport \"antd/lib/form/style/css\";\nimport _Form from \"antd/lib/form\";\nimport \"antd/lib/input/style/css\";\nimport _Input from \"antd/lib/input\";\nimport \"antd/lib/message/style/css\";\nimport _message from \"antd/lib/message\";\nvar __jsx = React.createElement;\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport React, { useContext, useState } from 'react';\nimport Link from 'next/link';\nimport apiServices from '../../services/apiServices';\nimport { API } from '../../services/apiResource';\nimport Router from 'next/router';\nimport { UserContext } from '../../Context/StoreContext';\nconst layout = {\n  labelCol: {\n    span: 8\n  },\n  wrapperCol: {\n    span: 16\n  }\n};\nconst tailLayout = {\n  wrapperCol: {\n    offset: 8,\n    span: 16\n  }\n};\nexport default function Login() {\n  const {\n    setUser\n  } = useContext(UserContext);\n  const {\n    0: loading,\n    1: setLoading\n  } = useState(false);\n\n  const submitFinish = async values => {\n    setLoading(true);\n    const data = await apiServices.get(API.USERS.get);\n\n    if (data) {\n      const dataUser = data.find(user => user.email === values.email && user.password === values.password);\n\n      if (dataUser) {\n        setUser({\n          id: dataUser.id,\n          name: dataUser.name\n        });\n\n        _message.success(\"Login success\", 1);\n\n        Router.push('/');\n      } else {\n        setLoading(false);\n\n        _message.error(\"Not found user\", 1);\n      }\n    } else {\n      setLoading(false);\n      throw Error(\"failed to fetch!!!\");\n    }\n  };\n\n  return __jsx(_Row, {\n    style: {\n      paddingTop: \"13%\"\n    },\n    justify: \"center\"\n  }, __jsx(_Form, _extends({}, layout, {\n    onFinish: submitFinish\n  }), __jsx(_Form.Item, {\n    label: \"email\",\n    name: \"email\",\n    rules: [{\n      required: true,\n      message: 'Please input your username!'\n    }]\n  }, __jsx(_Input, null)), __jsx(_Form.Item, {\n    label: \"Password\",\n    name: \"password\",\n    rules: [{\n      required: true,\n      message: 'Please input your password!'\n    }]\n  }, __jsx(_Input.Password, null)), __jsx(_Form.Item, tailLayout, __jsx(_Button, {\n    loading: loading,\n    type: \"primary\",\n    htmlType: \"submit\"\n  }, \"Login\"), __jsx(Link, {\n    href: \"/\"\n  }, __jsx(\"a\", {\n    style: {\n      paddingLeft: \"20px\"\n    }\n  }, \"Back to home\")))));\n}","map":null,"metadata":{},"sourceType":"module"}