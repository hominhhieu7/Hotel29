{"ast":null,"code":"import \"antd/lib/row/style/css\";\nimport _Row from \"antd/lib/row\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport \"antd/lib/button/style/css\";\nimport _Button from \"antd/lib/button\";\nimport \"antd/lib/form/style/css\";\nimport _Form from \"antd/lib/form\";\nimport \"antd/lib/input/style/css\";\nimport _Input from \"antd/lib/input\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport \"antd/lib/message/style/css\";\nimport _message from \"antd/lib/message\";\nvar _jsxFileName = \"F:\\\\LearnWork\\\\HotelProject\\\\frontendhotel\\\\pages\\\\login\\\\index.js\";\nvar __jsx = React.createElement;\nimport React from 'react';\nimport Link from 'next/link';\nimport apiServices from '../../services/apiServices';\nimport { API } from '../../services/apiResource';\nimport { Router } from 'next/router';\nvar layout = {\n  labelCol: {\n    span: 8\n  },\n  wrapperCol: {\n    span: 16\n  }\n};\nvar tailLayout = {\n  wrapperCol: {\n    offset: 8,\n    span: 16\n  }\n};\nexport default function Login() {\n  var _useContext = useContext(UserContext),\n      user = _useContext.user,\n      setUser = _useContext.setUser;\n\n  var submitFinish = function submitFinish(values) {\n    var data, dataUser;\n    return _regeneratorRuntime.async(function submitFinish$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return _regeneratorRuntime.awrap(apiServices.get(API.USERS.get));\n\n          case 2:\n            data = _context.sent;\n\n            if (!data) {\n              _context.next = 8;\n              break;\n            }\n\n            dataUser = data.find(function (user) {\n              return user.email === values.email && user.password === values.password;\n            });\n\n            if (dataUser) {\n              setUser({\n                id: dataUser.id,\n                name: dataUser.name\n              });\n\n              _message.success(\"Login success\", 1);\n\n              Router.push('/');\n            } else {\n              _message.error(\"Not found user\", 1);\n            }\n\n            _context.next = 9;\n            break;\n\n          case 8:\n            throw Error(\"failed to fetch!!!\");\n\n          case 9:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  return __jsx(_Row, {\n    style: {\n      paddingTop: \"13%\"\n    },\n    justify: \"center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 9\n    }\n  }, __jsx(_Form, _extends({}, layout, {\n    onFinish: submitFinish,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 13\n    }\n  }), __jsx(_Form.Item, {\n    label: \"email\",\n    name: \"email\",\n    rules: [{\n      required: true,\n      message: 'Please input your username!'\n    }],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 17\n    }\n  }, __jsx(_Input, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 21\n    }\n  })), __jsx(_Form.Item, {\n    label: \"Password\",\n    name: \"password\",\n    rules: [{\n      required: true,\n      message: 'Please input your password!'\n    }],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 17\n    }\n  }, __jsx(_Input.Password, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 21\n    }\n  })), __jsx(_Form.Item, _extends({}, tailLayout, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 17\n    }\n  }), __jsx(_Button, {\n    type: \"primary\",\n    htmlType: \"submit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 21\n    }\n  }, \"Login\"), __jsx(Link, {\n    href: \"/\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 21\n    }\n  }, __jsx(\"a\", {\n    style: {\n      paddingLeft: \"20px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 36\n    }\n  }, \"Back to home\")))));\n}","map":{"version":3,"sources":["F:/LearnWork/HotelProject/frontendhotel/pages/login/index.js"],"names":["React","Link","apiServices","API","Router","layout","labelCol","span","wrapperCol","tailLayout","offset","Login","useContext","UserContext","user","setUser","submitFinish","values","get","USERS","data","dataUser","find","email","password","id","name","success","push","error","Error","paddingTop","required","message","paddingLeft"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport { Form, Input, Button, Checkbox, Row, Col, message } from 'antd';\r\nimport Link from 'next/link';\r\nimport apiServices from '../../services/apiServices';\r\nimport { API } from '../../services/apiResource';\r\nimport { Router } from 'next/router';\r\n\r\n\r\nconst layout = {\r\n    labelCol: { span: 8 },\r\n    wrapperCol: { span: 16 },\r\n};\r\nconst tailLayout = {\r\n    wrapperCol: { offset: 8, span: 16 },\r\n};\r\n\r\n\r\nexport default function Login() {\r\n    const { user, setUser } = useContext(UserContext);\r\n\r\n    const submitFinish = async values => {\r\n        const data = await apiServices.get(API.USERS.get);\r\n        if (data) {\r\n            const dataUser = data.find(user => user.email === values.email && user.password === values.password);\r\n            if (dataUser) {\r\n                setUser({ id: dataUser.id, name: dataUser.name });\r\n                message.success(\"Login success\", 1);\r\n                Router.push('/');\r\n            }\r\n            else {\r\n                message.error(\"Not found user\", 1);\r\n            }\r\n        } else {\r\n            throw Error(\"failed to fetch!!!\")\r\n        }\r\n    }\r\n\r\n    return (\r\n        <Row style={{ paddingTop: \"13%\" }} justify=\"center\">\r\n            <Form {...layout} onFinish={submitFinish}>\r\n                <Form.Item\r\n                    label=\"email\"\r\n                    name=\"email\"\r\n                    rules={[{ required: true, message: 'Please input your username!' }]}\r\n                >\r\n                    <Input />\r\n                </Form.Item>\r\n                <Form.Item\r\n                    label=\"Password\"\r\n                    name=\"password\"\r\n                    rules={[{ required: true, message: 'Please input your password!' }]}\r\n                >\r\n                    <Input.Password />\r\n                </Form.Item>\r\n                <Form.Item {...tailLayout}>\r\n                    <Button type=\"primary\" htmlType=\"submit\">\r\n                        Login\r\n                    </Button>\r\n                    <Link href=\"/\"><a style={{ paddingLeft: \"20px\" }}>Back to home</a></Link>\r\n                </Form.Item>\r\n            </Form>\r\n\r\n        </Row>\r\n    )\r\n}\r\n\r\n"]},"metadata":{},"sourceType":"module"}